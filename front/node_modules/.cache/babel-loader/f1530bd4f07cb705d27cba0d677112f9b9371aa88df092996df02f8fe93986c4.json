{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useRef, useEffect } from 'react';\nimport { useDJConsole } from './DJConsoleContext';\nconst useSound = soundUrl => {\n  _s();\n  const audioRef = useRef(null);\n  const isPlayingRef = useRef(false);\n  const playPromiseRef = useRef(null);\n  const {\n    volume\n  } = useDJConsole();\n  useEffect(() => {\n    // Create audio element if it doesn't exist\n    if (!audioRef.current) {\n      audioRef.current = new Audio(soundUrl);\n      audioRef.current.loop = true;\n      audioRef.current.preload = 'auto';\n      audioRef.current.volume = volume;\n    }\n\n    // Cleanup on unmount\n    return () => {\n      stop();\n      audioRef.current = null;\n    };\n  }, [soundUrl]);\n  const play = () => {\n    if (!isPlayingRef.current && audioRef.current) {\n      audioRef.current.play().catch(err => console.error(\"Audio play error:\", err));\n      isPlayingRef.current = true;\n    }\n  };\n  const stop = () => {\n    if (isPlayingRef.current && audioRef.current) {\n      audioRef.current.pause();\n      audioRef.current.currentTime = 0;\n      isPlayingRef.current = false;\n    }\n  };\n  return {\n    play,\n    stop,\n    isPlaying: isPlayingRef.current\n  };\n};\n_s(useSound, \"urQyHkkxqqh7jOCwy+fPQW+45Dw=\", false, function () {\n  return [useDJConsole];\n});\nexport default useSound;","map":{"version":3,"names":["useRef","useEffect","useDJConsole","useSound","soundUrl","_s","audioRef","isPlayingRef","playPromiseRef","volume","current","Audio","loop","preload","stop","play","catch","err","console","error","pause","currentTime","isPlaying"],"sources":["/home/leabrun/python_/KWORK/dj/front/src/useSound.jsx"],"sourcesContent":["import { useRef, useEffect } from 'react';\nimport { useDJConsole } from './DJConsoleContext';\n\nconst useSound = (soundUrl) => {\n  const audioRef = useRef(null);\n  const isPlayingRef = useRef(false);\n  const playPromiseRef = useRef(null);\n\n  const { volume } = useDJConsole();\n\n  useEffect(() => {\n    // Create audio element if it doesn't exist\n    if (!audioRef.current) {\n      audioRef.current = new Audio(soundUrl);\n      audioRef.current.loop = true;\n      audioRef.current.preload = 'auto';\n      audioRef.current.volume = volume;\n    }\n\n    // Cleanup on unmount\n    return () => {\n      stop();\n      audioRef.current = null;\n    };\n  }, [soundUrl]);\n\n  const play = () => {\n    if (!isPlayingRef.current && audioRef.current) {\n      audioRef.current.play().catch(err => console.error(\"Audio play error:\", err));\n      isPlayingRef.current = true;\n    }\n  };\n\n  const stop = () => {\n    if (isPlayingRef.current && audioRef.current) {\n      audioRef.current.pause();\n      audioRef.current.currentTime = 0;\n      isPlayingRef.current = false;\n    }\n  };\n\n  return { play, stop, isPlaying: isPlayingRef.current };\n};\n\nexport default useSound;"],"mappings":";AAAA,SAASA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AACzC,SAASC,YAAY,QAAQ,oBAAoB;AAEjD,MAAMC,QAAQ,GAAIC,QAAQ,IAAK;EAAAC,EAAA;EAC7B,MAAMC,QAAQ,GAAGN,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMO,YAAY,GAAGP,MAAM,CAAC,KAAK,CAAC;EAClC,MAAMQ,cAAc,GAAGR,MAAM,CAAC,IAAI,CAAC;EAEnC,MAAM;IAAES;EAAO,CAAC,GAAGP,YAAY,CAAC,CAAC;EAEjCD,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACK,QAAQ,CAACI,OAAO,EAAE;MACrBJ,QAAQ,CAACI,OAAO,GAAG,IAAIC,KAAK,CAACP,QAAQ,CAAC;MACtCE,QAAQ,CAACI,OAAO,CAACE,IAAI,GAAG,IAAI;MAC5BN,QAAQ,CAACI,OAAO,CAACG,OAAO,GAAG,MAAM;MACjCP,QAAQ,CAACI,OAAO,CAACD,MAAM,GAAGA,MAAM;IAClC;;IAEA;IACA,OAAO,MAAM;MACXK,IAAI,CAAC,CAAC;MACNR,QAAQ,CAACI,OAAO,GAAG,IAAI;IACzB,CAAC;EACH,CAAC,EAAE,CAACN,QAAQ,CAAC,CAAC;EAEd,MAAMW,IAAI,GAAGA,CAAA,KAAM;IACjB,IAAI,CAACR,YAAY,CAACG,OAAO,IAAIJ,QAAQ,CAACI,OAAO,EAAE;MAC7CJ,QAAQ,CAACI,OAAO,CAACK,IAAI,CAAC,CAAC,CAACC,KAAK,CAACC,GAAG,IAAIC,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEF,GAAG,CAAC,CAAC;MAC7EV,YAAY,CAACG,OAAO,GAAG,IAAI;IAC7B;EACF,CAAC;EAED,MAAMI,IAAI,GAAGA,CAAA,KAAM;IACjB,IAAIP,YAAY,CAACG,OAAO,IAAIJ,QAAQ,CAACI,OAAO,EAAE;MAC5CJ,QAAQ,CAACI,OAAO,CAACU,KAAK,CAAC,CAAC;MACxBd,QAAQ,CAACI,OAAO,CAACW,WAAW,GAAG,CAAC;MAChCd,YAAY,CAACG,OAAO,GAAG,KAAK;IAC9B;EACF,CAAC;EAED,OAAO;IAAEK,IAAI;IAAED,IAAI;IAAEQ,SAAS,EAAEf,YAAY,CAACG;EAAQ,CAAC;AACxD,CAAC;AAACL,EAAA,CAvCIF,QAAQ;EAAA,QAKOD,YAAY;AAAA;AAoCjC,eAAeC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}